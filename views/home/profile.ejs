<%- include('../includes/head.ejs') %>
<%- include('../includes/navigation.ejs') %>
	<!-- main content -->
	<main class="main">
		<div class="container-fluid">
			<div class="row row--grid">
				<!-- breadcrumb -->
				<div class="col-12">
					<ul class="breadcrumb">
						<li class="breadcrumb__item"><a href="index.html">Home</a></li>
						<li class="breadcrumb__item breadcrumb__item--active">Profile</li>
					</ul>
				</div>
				<!-- end breadcrumb -->

				<!-- title -->
				<div class="col-12">
					<div class="main__title">
						<h2>Advertisements Local To You:</h2>
					</div>
				</div>
				<!-- end title -->

				<div class="premiumAd owl-carousel" id="premAd-index-container">
					<% goldAds.forEach(goldAd => { %>
						<div class="hero__slide-contestant" data-bg="img/home/slide1.jpg">
							<h1 class="hero__title--contestant"><%= goldAd.adTitle %></h1>
							<p class="hero__text"><%= goldAd.adDescription %></p>
							<div class="hero__btns">
								<a href="<%= goldAd.affiliateLink %>" class="hero__btn hero__btn--green">Contact Us</a>
							</div>
						</div>
					<% }) %>
				</div>
					<button class="main__nav-contestant main__nav--hero main__nav--prev" data-nav="#hero" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17,11H9.41l3.3-3.29a1,1,0,1,0-1.42-1.42l-5,5a1,1,0,0,0-.21.33,1,1,0,0,0,0,.76,1,1,0,0,0,.21.33l5,5a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42L9.41,13H17a1,1,0,0,0,0-2Z"/></svg></button>
					<button class="main__nav-contestant main__nav--hero main__nav--next" data-nav="#hero" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.92,11.62a1,1,0,0,0-.21-.33l-5-5a1,1,0,0,0-1.42,1.42L14.59,11H7a1,1,0,0,0,0,2h7.59l-3.3,3.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0l5-5a1,1,0,0,0,.21-.33A1,1,0,0,0,17.92,11.62Z"/></svg></button>

			<!-- end slider -->

				<% if (errorMessage) { %>
					<div class="sign__error"><%= errorMessage %></div>
				<% } %>

				<!-- title -->
				<div class="col-12">
					<div class="main__title main__title--page">
						<h1>Profile</h1>
					</div>
				</div>
				<!-- end title -->
			</div>

			<div class="row row--grid">
				<div class="col-12">
					<div class="profile">
						<div class="profile__user">
							<div class="profile__avatar">
								<% if (userProfileImage) { %>
									<img src="/<%= userProfileImage %>" alt="">
								<% } %>
							</div>
							<div class="profile__meta">
								<h3><%= username %></h3>
								<span>Email: <%= email %></span>
							</div>
						</div>

						<!-- tabs nav -->
						<ul class="nav nav-tabs profile__tabs" id="profile__tabs" role="tablist">
							<li class="nav-item">
								<a class="nav-link active" data-toggle="tab" href="#tab-1" role="tab" aria-controls="tab-1" aria-selected="true">Profile</a>
							</li>

							<li class="nav-item">
								<a class="nav-link" data-toggle="tab" href="#tab-2" role="tab" aria-controls="tab-2" aria-selected="false">Songs</a>
							</li>

							<li class="nav-item">
								<a class="nav-link" data-toggle="tab" href="#tab-3" role="tab" aria-controls="tab-2" aria-selected="false">Add Song</a>
							</li>
							
							<li class="nav-item">
								<a class="nav-link" data-toggle="tab" href="#tab-4" role="tab" aria-controls="tab-4" aria-selected="false">Settings</a>
							</li>
						</ul>
						<!-- end tabs nav -->
					</div>

					<!-- content tabs -->
					<div class="tab-content">
						<div class="tab-pane fade show active" id="tab-1" role="tabpanel">
							<div class="row row--grid">
								<div class="col-12 col-lg-6 col-xl-3">
									<div class="stats">
										<span>Music Media Accounts</span>
										<p><b>Instagram: @<%= instagram %></b></p>
										<p><b>TikTok: @<%= tiktok %></b></p>
										<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,13.18V11A8,8,0,0,0,4,11v2.18A3,3,0,0,0,2,16v2a3,3,0,0,0,3,3H8a1,1,0,0,0,1-1V14a1,1,0,0,0-1-1H6V11a6,6,0,0,1,12,0v2H16a1,1,0,0,0-1,1v6a1,1,0,0,0,1,1h3a3,3,0,0,0,3-3V16A3,3,0,0,0,20,13.18ZM7,15v4H5a1,1,0,0,1-1-1V16a1,1,0,0,1,1-1Zm13,3a1,1,0,0,1-1,1H17V15h2a1,1,0,0,1,1,1Z"/></svg>
									</div>
								</div>

								<div class="col-12 col-lg-6 col-xl-3">
									<div class="stats">
										<span>Total Votes</span>
										<p><b><%= votes %></b></p>
										<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9,10a1,1,0,0,0-1,1v2a1,1,0,0,0,2,0V11A1,1,0,0,0,9,10Zm12,1a1,1,0,0,0,1-1V6a1,1,0,0,0-1-1H3A1,1,0,0,0,2,6v4a1,1,0,0,0,1,1,1,1,0,0,1,0,2,1,1,0,0,0-1,1v4a1,1,0,0,0,1,1H21a1,1,0,0,0,1-1V14a1,1,0,0,0-1-1,1,1,0,0,1,0-2ZM20,9.18a3,3,0,0,0,0,5.64V17H10a1,1,0,0,0-2,0H4V14.82A3,3,0,0,0,4,9.18V7H8a1,1,0,0,0,2,0H20Z"/></svg>
									</div>
								</div>

								<div class="col-12 col-lg-6 col-xl-3">
									<div class="stats">
										<span>Preferred Genre</span>
										<p><b><%= preferredGenre %></b></p>
										<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6,11a1,1,0,1,0,1,1A1,1,0,0,0,6,11Zm12,0a1,1,0,1,0,1,1A1,1,0,0,0,18,11Zm2-6H4A3,3,0,0,0,1,8v8a3,3,0,0,0,3,3H20a3,3,0,0,0,3-3V8A3,3,0,0,0,20,5Zm1,11a1,1,0,0,1-1,1H4a1,1,0,0,1-1-1V8A1,1,0,0,1,4,7H20a1,1,0,0,1,1,1ZM12,9a3,3,0,1,0,3,3A3,3,0,0,0,12,9Zm0,4a1,1,0,1,1,1-1A1,1,0,0,1,12,13Z"/></svg>
									</div>
								</div>


							</div>

							<div class="row row--grid">
								<!-- dashbox -->
								<div class="col-12 col-lg-6">
									<div class="dashbox">
										<div class="dashbox__title">
											<h3> About <%= username %>, </h3>
										</div>

										<div class="dashbox__list-wrap">
											<div class="dashbox__scroll">
												<div class="dashbox__note dashbox__note--succ">
													<% if (bio) { %>
														<p><%= bio %></p>
													<% } else { %>
														<p><%= username %> has not written a bio yet.</p>
													<% } %>
												</div>
											</div>
										</div>
									</div>
								</div>
								<!-- end dashbox -->

								<!-- dashbox -->
								<div class="col-12 col-lg-6">
									<div class="dashbox">
										<div class="dashbox__title">
											<h3><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21.65,2.24a1,1,0,0,0-.8-.23l-13,2A1,1,0,0,0,7,5V15.35A3.45,3.45,0,0,0,5.5,15,3.5,3.5,0,1,0,9,18.5V10.86L20,9.17v4.18A3.45,3.45,0,0,0,18.5,13,3.5,3.5,0,1,0,22,16.5V3A1,1,0,0,0,21.65,2.24ZM5.5,20A1.5,1.5,0,1,1,7,18.5,1.5,1.5,0,0,1,5.5,20Zm13-2A1.5,1.5,0,1,1,20,16.5,1.5,1.5,0,0,1,18.5,18ZM20,7.14,9,8.83v-3L20,4.17Z"/></svg> Your songs</h3>
										</div>

										<div class="dashbox__list-wrap">
											<ul class="main__list main__list--dashbox">
												<% if (userSongs.length > 0) { %>
													<% userSongs.forEach(song => { %>
														<li class="single-item">
															<div class="single-item__title">
																<h4><%= song.songTitle %></h4>
															</div>
															<% if (song.season === currentSeason && isPremiumUser) { %>
																<a class="single-item__export copy-link" href="/voting/<%= song.songTitle %>/<%= song.artistName %>">Promote Song on Social Media</a>
															<% } else if (song.season === currentSeason && !isPremiumUser) { %>
																<a class="single-item__export copy-link" href="/voting/<%= song.songTitle %>/<%= song.artistName %>">Promote Song on Social Media</a>
															<% } else { %>
																<p class="single-item__export">Votes: <%= song.votes %></p>
															<% } %>
														</li>
													<% }) %>
												<% } else { %>
													<li>
														<p class="no__songs">You have not uploaded any songs</p>
													</li>
												<% } %>
											</ul>
										</div>
									</div>
								</div>
								<!-- end dashbox -->
							</div>
						</div>

						<div class="tab-pane fade" id="tab-2" role="tabpanel">
							<div class="row row--grid">
								<div class="col-12">
									<div class="dashbox">
										<div class="dashbox__table-wrap">
											<div class="dashbox__table-scroll">
												<table class="main__table">
													<thead>
														<tr>
															<th><a href="#" class="active">Song Title </a></th>
															<th><a href="#" class="active">Date Created</a></th>
															<th><a href="#" class="active">Total Votes </a></th>
														</tr>
													</thead>
													<tbody>
														<% if (userSongs.length > 0) { %>
															<% userSongs.forEach(song => { %>
																<tr>	
																	<td>
																		<div class="main__table-text"><a href="#"><%= song.songTitle %></a></div>
																	</td>
																	<td>
																		<div class="main__table-text"><%= song.dateCreated %></div>
																	</td>
																	<td>
																		<div class="main__table-text main__table-text--price"><%= song.votes %></div>
																	</td>
																</tr>
															<% }) %>
														<% } else { %>
															<tr>
																<td>
																	<p class="no__songs">You have not uploaded any songs.</p>
																</td>
															</tr>
														<% } %>
													</tbody>
												</table>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>

						<div class="tab-pane fade" id="tab-3" role="tabpanel">
							<div class="row row--grid">
								<div class="col-12 col-lg-12">
									<div class="row">
										<div class="col-12 col-md-6 col-lg-12 col-xl-6">
											<div class="sign__group">
												<label class="pmt__title">$10 (Single Upload)</label>
												<ul class="option-list">
													<li>One single upload is $10.</li>
													<li>You can upload your performance after the 7th of the month, but your song will be entered into NEXT season's competition. (Unlike the premium membership).</li>
													<li>You will not be able to edit the song after you complete your upload and paid for it (MAKE SURE YOU UPLOAD THE RIGHT CONTENT).</li>
													<li>You will be able to access your social media promotional link after the 7th of the month (Premium members get instant access to promotional link).</li>
												</ul>
											</div>
										</div>
										
										<div class="col-12 col-md-6 col-lg-12 col-xl-6">
											<div class="sign__group">
												<label for="genre" class="pmt__title">$99 (1yr Subscription)</label>
												<ul class="option-list">
													<li>One time payment of $99 gets you one performance upload in every season for the duration of 1 year from purchase (12 seasons total).</li>
													<li>You can upload your video at any given day of the month, unlike basic members, and still enter the current season's competition.</li>
													<li>You will be able to access your promotional link immediately after upload and have 7 extra days of promotion to increase your votes.</li>
													<li>Premium subscription saves you 21$ yearly and allows you more flexibility to enter 12 seasons consecutively.</li>
													<li>Premium users WILL be able to edit their song after it is uploaded.</li>
												</ul>
											</div>
										</div>
										
									</div>

									<form action="/checkout" method="POST" enctype="multipart/form-data" class="sign__form sign__form--profile">
										<div class="row">
											<div class="col-12">
												<h4 class="sign__title">Add new song</h4>
											</div>

											<div class="col-12 col-md-6 col-lg-12 col-xl-6">
												<div class="sign__group">
													<label class="sign__label" for="title">Song Title</label>
													<input id="title" type="text" name="title" class="sign__input">
												</div>
											</div>

											<div class="col-12 col-md-6 col-lg-12 col-xl-6">
												<div class="sign__group">
													<label class="sign__label" for="songUrl">Shared YouTube Song URL</label>
													<input id="songUrl" type="text" name="songUrl" class="sign__input" placeholder="https://youtu.be/1a2b3c4d">
												</div>
											</div>

											<div class="col-12 col-md-6 col-lg-12 col-xl-6">
												<div class="sign__group">
													<label for="genre" class="sign__label">Select Perferred Genre:</label>
													<select name="genre" id="genre" class="sign__select">
														<option value="All genres">All Genres</option>
														<option value="Alternative">Alternative</option>
														<option value="Blues">Blues</option>
														<option value="Classical">Classical</option>
														<option value="Country">Country</option>
														<option value="Electronic">Electronic</option>
														<option value="HipHopRap">Hip-Hop/Rap</option>
														<option value="Indie">Indie</option>
														<option value="Jazz">Jazz</option>
														<option value="Latino">Latino</option>
														<option value="R&B">R&B/Soul</option>
														<option value="Rock">Rock</option>
													</select>
												</div>
											</div>
											<div class="col-12 col-md-6 col-lg-12 col-xl-6">
												<% if (!isPremiumUser) { %>
													<div class="sign__group">
														<label for="paymentOption" class="sign__label">Select Payment Option</label>
														<select name="paymentOption" id="paymentOption" class="sign__select">
															<option value="Single Upload">$10 (Single Upload)</option>
															<option value="Subscription">$99 (1yr Subscription)</option>
														</select>
													</div>
												<% } %>
											</div>
											<div class="col-12 col-md-6 col-lg-12 col-xl-6">
												<button class="sign__btn" id="submit-btn" type="submit">Submit Song</button>
											</div>
										</div>
									</form>
								</div>
							</div>
						</div>

						<div class="tab-pane fade" id="tab-4" role="tabpanel">
							<div class="row row--grid">
								<!-- details form -->
								<div class="col-12 col-lg-6">
									<form action="/edit-profile" method="POST" enctype="multipart/form-data" class="sign__form">
		
										<div class="sign__group">
											<label for="userProfileImage">Profile Picture:</label>
											<input type="file" name="userProfileImage" id="ProfileImage">
										</div>

										<div class="sign__group">
											<label for="name">Name:</label>
											<input type="text" name="name" id="name" class="sign__input" placeholder="Display Name" value="<%= username %>">
										</div>
		
										<div class="sign__group">
											<label for="instagram">Instagram:</label>
											<input type="text" name="instagram" id="instagram" class="sign__input" value="<%= instagram %>">
										</div>
		
										<div class="sign__group">
											<label for="tiktok">Tik Tok:</label>
											<input type="text" name="tiktok" id="tiktok" class="sign__input" value="<%= tiktok %>">
										</div>
		
										<div class="sign__group">
											<label for="email">Email:</label>
											<input type="text" name="email" id="email" class="sign__input" value="<%= email %>">
										</div>
										<div class="sign__group">
											<label for="bio">Bio:</label>
											<textarea type="text" name="bio" id="bio" class="sign__input"></textarea>
										</div>
		
										<div class="sign__group">
											<label for="genre" class="sign__label">Select Perferred Genre:</label>
											<select name="genre" class="sign__select">
												<option value="All genres">All Genres</option>
												<option value="Alternative">Alternative</option>
												<option value="Blues">Blues</option>
												<option value="Classical">Classical</option>
												<option value="Country">Country</option>
												<option value="Electronic">Electronic</option>
												<option value="HipHopRap">Hip-Hop/Rap</option>
												<option value="Indie">Indie</option>
												<option value="Jazz">Jazz</option>
												<option value="Latino">Latino</option>
												<option value="R&B">R&B/Soul</option>
												<option value="Rock">Rock</option>
											</select>
										</div>
										
										<button class="sign__btn" type="submit">Submit Changes</button>
									</form>
								</div>
								<!-- end details form -->

								<!-- password form -->
								<div class="col-12 col-lg-6">
									<form action="/change-password" method="POST" class="sign__form sign__form--profile">
										<div class="row">
											<div class="col-12">
												<h4 class="sign__title">Change password</h4>
											</div>

											<div class="col-12 col-md-6 col-lg-12 col-xl-6">
												<div class="sign__group">
													<label class="sign__label" for="oldpass">Old password</label>
													<input id="oldpass" type="password" name="oldpass" class="sign__input">
												</div>
											</div>

											<div class="col-12 col-md-6 col-lg-12 col-xl-6">
												<div class="sign__group">
													<label class="sign__label" for="newpass">New password</label>
													<input id="newpass" type="password" name="newpass" class="sign__input">
												</div>
											</div>

											<div class="col-12 col-md-6 col-lg-12 col-xl-6">
												<div class="sign__group">
													<label class="sign__label" for="confirmpass">Confirm new password</label>
													<input id="confirmpass" type="password" name="confirmpass" class="sign__input">
												</div>
											</div>

											<div class="col-12">
												<button class="sign__btn" type="submit">Change</button>
											</div>
										</div>
									</form>
								</div>
								<!-- end password form -->

								<div class="col-12 col-lg-6">
									<div class="sign__form update-subscription">
										<a href="https://billing.stripe.com/p/login/test_bIYeYXbyRcRk2ac000" target="_blank">Delete/Update Subscription Information</a>
									</div>
								</div>
							</div>
						</div>
					</div>
					<!-- end content tabs -->
				</div>
			</div>	
		</div>
	</main>
	<!-- end main content -->
<%- include('../includes/end.ejs') %>